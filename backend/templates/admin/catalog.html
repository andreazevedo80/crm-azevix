{% extends "base.html" %}

{% block title %}Catálogo de Produtos e Serviços - Admin{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="text-azevix mb-0"><i class="fas fa-book me-2"></i>Catálogo de Produtos e Serviços</h1>
    <div>
        <a href="{{ url_for('admin.activity_management') }}" class="btn btn-outline-secondary">Gerenciar Atividades</a>
        <a href="{{ url_for('admin.package_management') }}" class="btn btn-outline-secondary">Gerenciar Pacotes</a>
    </div>
</div>

<div class="card card-azevix mb-4">
    <div class="card-header"><h5 id="form-title" class="card-title mb-0">Adicionar Novo Item</h5></div>
    <div class="card-body">
        <form id="catalog-form">
            <input type="hidden" id="item-id">
            <div class="row">
                <div class="col-md-12 mb-3">
                    <label for="item-nome" class="form-label">Nome do Item *</label>
                    <input type="text" id="item-nome" class="form-control" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="item-tipo" class="form-label">Tipo de Item *</label>
                    <select id="item-tipo" class="form-select" required>
                        <option value="Serviço Pontual">Serviço Pontual</option>
                        <option value="Serviço Recorrente">Serviço Recorrente</option>
                        <option value="Consultoria">Consultoria</option>
                        <option value="Produto">Produto</option>
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="item-cobranca" class="form-label">Tipo de Cobrança *</label>
                    <select id="item-cobranca" class="form-select" required>
                        <option value="Pacote">Pacote</option>
                        <option value="Mensal">Mensal</option>
                        <option value="Hora">Por Hora</option>
                        <option value="Unitário">Unitário</option>
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="item-preco" class="form-label">Preço Base (R$)</label>
                    <input type="number" step="0.01" id="item-preco" class="form-control">
                    <div class="form-check form-switch mt-1">
                        <input class="form-check-input" type="checkbox" id="item-sob-consulta">
                        <label class="form-check-label" for="item-sob-consulta">Preço sob consulta</label>
                    </div>
                </div>
                <div class="col-md-12 mb-3">
                    <label for="item-descricao" class="form-label">Descrição</label>
                    <textarea id="item-descricao" class="form-control" rows="3"></textarea>
                </div>
            </div>
            
            <div id="activities-section" style="display: none;">
                <hr>
                <h6 class="text-azevix">Atividades Padrão Inclusas</h6>
                <p class="text-muted small">Selecione as atividades que compõem este serviço.</p>
                <div id="activities-container" class="row p-2 border rounded" style="max-height: 200px; overflow-y: auto;">
                </div>
            </div>
            
            <hr>
            <h6 class="text-azevix">Campos para Licitação (Opcional)</h6>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="item-catmat" class="form-label">Código CATMAT/CATSER</label>
                    <input type="text" id="item-catmat" class="form-control">
                </div>
                <div class="col-md-8 mb-3">
                    <label for="item-palavras-chave" class="form-label">Palavras-chave (separadas por vírgula)</label>
                    <input type="text" id="item-palavras-chave" class="form-control">
                </div>
            </div>
            <div class="text-end">
                <button type="button" id="cancel-btn" class="btn btn-secondary" style="display: none;">Cancelar</button>
                <button type="submit" class="btn btn-azevix">Salvar</button>
            </div>
        </form>
    </div>
</div>

<div class="card card-azevix">
    <div class="card-header"><h5 class="card-title mb-0">Itens Cadastrados</h5></div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead><tr><th>Nome</th><th>Tipo</th><th>Cobrança</th><th>Preço Base</th><th>Status</th><th>Ações</th></tr></thead>
                <tbody id="catalog-table-body"></tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/admin/catalog.js') }}"></script>
{% endblock %}